spring:
  application:
    name: cesMicronautExample
  r2dbc:
    username: ${USERNAME_POSTGRES}
    password: ${PASSWORD_POSTGRES}
    pool:
      initial-size: 5
      max-size: 100
      validation-query: SELECT 1
    url: ${R2DBC_DATASOURCES_DEFAULT_URL}
    properties:
      schema: public
  datasource:
    driverClassName: org.postgresql.Driver
    url: ${DATASOURCES_DEFAULT_URL}
    username: root
    password: root
  liquibase:
    enabled: true
    change-log: 'classpath:db/liquibase-changelog.xml'


jackson:
  date-format: yyyy-MM-dd'T'HH:mm:ss.SSSZ


liquibase:
  enabled: true
  datasources:
    default:
      enabled: true
      change-log: 'classpath:db/liquibase-changelog.xml'

datasources:
  default:
    driverClassName: org.postgresql.Driver
    dialect: POSTGRES
    url: ${DATASOURCES_DEFAULT_URL}
    username: root
    password: root
    schema-generate: NONE

r2dbc:
  datasources:
    default:
      options:
        driver: pool
        protocol: postgres
        maxSize: 100
        initialSize: 5
      url: ${R2DBC_DATASOURCES_DEFAULT_URL}
      username: root
      password: root
      schema-generate: NONE

endpoints:
  prometheus:
    sensitive: false

client:
  user-api:
    base-url: http://localhost:8576
    response-timeout: 1000
    connectionTimeout: 1000

resilience4j.circuitbreaker:
    instances:
      user-api:
        baseConfig: default
    configs:
      default:
        registerHealthIndicator: true
        slidingWindowSize: 2
        permittedNumberOfCallsInHalfOpenState: 3
        slidingWindowType: TIME_BASED
        minimumNumberOfCalls: 2
        waitDurationInOpenState: 1s
        failureRateThreshold: 50
        eventConsumerBufferSize: 10
